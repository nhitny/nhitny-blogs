@tailwind base;
@tailwind components;
@tailwind utilities;

@keyframes marquee {
  from {
    transform: translateX(0);
  }

  to {
    transform: translateX(calc(-100% - var(--gap)));
  }
}

.animate-marquee {
  animation: marquee 30s linear infinite;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .bg-dark {
    background: #070c17db;
    backdrop-filter: blur(3px);
  }
}

html {
  scroll-behavior: smooth;
}

textarea::-webkit-scrollbar {
  width: 0;
}

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #6264f3 !important;
  border-radius: 5px !important;
}

button:focus {
  outline: 0 !important;
}

@media (max-width: 1180px) {
  .toc {
    display: none;
  }
}

.toc-inner {
  max-height: calc(100vh - 25vh);
}

.dropdown:hover .dropdown-menu {
  display: block;
}

body {
  @apply bg-white text-gray-900 dark:bg-gray-950 dark:text-gray-100 antialiased transition-colors duration-300;
}

a {
  @apply no-underline;
}

.prose {
  @apply prose-invert max-w-none;
}

/* CƒÉn gi·ªØa caption c·ªßa h√¨nh ·∫£nh */
.prose figure {
  @apply text-center;
}

.prose figcaption {
  @apply text-center text-sm text-gray-600 dark:text-gray-400 mt-2;
}

.prose img {
  @apply mx-auto;
}

/* Caption ƒë∆∞·ª£c th√™m b·ªüi JavaScript */
.prose .image-caption {
  @apply text-center text-sm text-gray-600 dark:text-gray-400 mt-2 mb-4;
}

/* CƒÉn gi·ªØa c√°c paragraph ch·ª©a "H√¨nh X:" trong b√†i vi·∫øt ƒë√£ publish */
.prose p[style*="text-align: center"] {
  text-align: center !important;
}

/* Thanh ph√¢n c√°ch m·ªù gi·ªØa c√°c section */
.prose h2 {
  @apply pt-8 mt-8 border-t border-gray-200 dark:border-gray-700;
}

.prose h2:first-of-type {
  @apply border-t-0 mt-0 pt-0;
}

/* ===========================
   üî• QUILL EDITOR FIX BIDI üî•
   =========================== */

.ql-editor {
  min-height: 400px !important;
  direction: ltr !important;
  text-align: left !important;
}

.ql-editor * {
  direction: ltr !important;
  text-align: left !important;
}

.ql-container {
  font-family: inherit;
  font-size: 1rem;
}

/* Sticky toolbar */
.ql-toolbar {
  position: sticky !important;
  top: 0 !important;
  z-index: 100 !important;
  background-color: white !important;
  border-bottom: 1px solid #ccc !important;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
}

/* Tooltips for all toolbar buttons - show below */
.ql-toolbar button {
  position: relative;
}

.ql-toolbar button::after {
  content: attr(title);
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  padding: 6px 10px;
  background: #333;
  color: white;
  font-size: 12px;
  white-space: nowrap;
  border-radius: 4px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
  margin-top: 5px;
  z-index: 1000;
}

.ql-toolbar button:hover::after {
  opacity: 1;
}

/* Custom tooltips for buttons without title attribute */
.ql-toolbar .ql-inline-math::after {
  content: "C√¥ng th·ª©c inline ($...$)";
}

.ql-toolbar .ql-block-math::after {
  content: "C√¥ng th·ª©c block ($$...$$)";
}

.ql-toolbar .ql-number-images::after {
  content: "ƒê√°nh s·ªë h√¨nh t·ª± ƒë·ªông";
}

/* Code block styling */
.ql-editor pre.ql-syntax {
  background-color: #2d2d2d !important;
  color: #f8f8f2 !important;
  padding: 16px !important;
  border-radius: 6px !important;
  border: 2px solid #444 !important;
  font-family: 'Courier New', monospace !important;
  font-size: 14px !important;
  overflow-x: auto !important;
  white-space: pre-wrap !important;
  word-wrap: break-word !important;
  margin: 16px 0 !important;
  min-height: 60px !important;
}

.dark .ql-editor pre.ql-syntax {
  background-color: #1a1a1a !important;
  border-color: #555 !important;
}

/* Highlight formulas in editor - add visual indicator for $ symbols */
.ql-editor p,
.ql-editor span,
.ql-editor div {
  /* Scan for $ in text and add subtle background */
}

/* Make $ symbols more visible in editor */
.ql-editor::after {
  content: "";
  display: block;
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: rgba(139, 92, 246, 0.9);
  color: white;
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 12px;
  font-family: monospace;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s;
}

/* Show hint when typing $ */
.ql-editor:focus::after {
  content: "üí° Tip: D√πng $...$ cho c√¥ng th·ª©c inline, $$...$$ cho c√¥ng th·ª©c block";
  opacity: 1;
}

/* Dark Mode support for Quill */
.dark .ql-toolbar {
  background-color: #374151;
  border-color: #4b5563;
}

.dark .ql-container {
  border-color: #4b5563;
  background-color: #111827;
  color: #f3f4f6;
}

/* Fix SVG icons in toolbar for dark mode */
.dark .ql-stroke {
  stroke: #e5e7eb !important;
}

.dark .ql-fill {
  fill: #e5e7eb !important;
}

.dark .ql-picker {
  color: #e5e7eb !important;
}